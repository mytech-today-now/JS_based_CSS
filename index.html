<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Interactive Web Design Styles Showcase</title>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-YR81E31MX4"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-YR81E31MX4');
  </script>
  
  <style>
    /* Base styles */
    body {
      margin: 0; padding: 0;
      font-family: Arial, sans-serif;
      line-height: 1.6;
    }
      /* Ensure site header stays at the very top */
#site-header {
    position: sticky;
    z-index: 100; /* Ensure header stays above hero section */
}

.flex-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
}

.grid-item {
  flex: 1 1 300px;
  border: 1px solid var(--accent-color);
  padding: 1rem;
  margin: 0.5rem 0;
  box-sizing: border-box;
  background-color: var(--bg-color);
  color: var(--text-color);
  radius: var(--rounded);
}

.grid-item p {
  margin: 0.5rem;
}

/* Hero Section and Video Background */
.hero-section {
position: fixed;  /* Change from relative to fixed */
top: 0;          /* Add top positioning */
left: 0;         /* Add left positioning */
width: 100%;     /* Simplify width */
height: 100vh;   /* Keep full viewport height */
z-index: -1;     /* Ensure it stays behind content */
}

.video-background {
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
z-index: -1;
}

/* Video Container Styling */
#traffic_videos {
position: relative;
width: 100%;
height: 100%;
background-color: black;    /* Fallback color */
}

/* Individual Video Elements */
[id$="_videos_1"],
[id$="_videos_2"]	{
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
object-fit: cover;          /* Maintain aspect ratio while covering */
transition: opacity 1s ease-in-out;
opacity: 0;
display: none;
}

/* Video Overlay */
.video-overlay {
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(0, 0, 0, 0.2);
z-index: 1;
}

/* Content Wrapper Adjustments */
.content-wrapper {
position: relative;
top: 0;
left: 0;
width: 100%;
height: 100%;
display: flex;
align-items: center;
justify-content: center;
padding: var(--padding);
z-index: 2;
margin: 0;                  /* Remove any margins */
}

/* Header Content */
.header-content {
flex: 1 1 33%;
padding: 2rem;
border-radius: var(--rounded);
text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
backdrop-filter: var(--blur);
opacity: var(--opacity);
max-height: 35%;
max-width: 35%;
}

.header-content h1 {
font-size: 2.5rem;
margin-bottom: 1rem;
}

.header-content p {
font-size: 1.2rem;
line-height: 1.6;
}
    
    
    .content-wrapper h1 {
      font-size: 3rem;
      margin-bottom: 1rem;
      text-shadow: 0 2px 4px rgba(0,0,0,0.5);
    }
    
    .content-wrapper p {
      font-size: 1.5rem;
      margin-bottom: 2rem;
      text-shadow: 0 1px 2px rgba(0,0,0,0.5);
    }
    
    .era-timeline {
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      margin: auto;
      padding: 2rem;
      overflow: hidden;
      /* display: none; /* Hidden by default, shown in cinematic mode */
    }

    main {
      max-width: 1200px; 
      margin: 0 auto;
      position: relative;
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      padding: 20px;
    }
    
    article.style-card {
      flex: 1 0 300px;
      border: 2px solid #ccc;
      border-radius: 6px;
      padding: 1rem;
      margin-bottom: 1rem;
      background: #fff;
      transition: transform .2s;
      max-width: calc(33.333% - 20px);
    }
    
    @media (max-width: 992px) {
      article.style-card {
        max-width: calc(50% - 20px);
      }
    }
    
    @media (max-width: 576px) {
      article.style-card {
        max-width: 100%;
      }
    }
    
    article.style-card:hover { 
      transform: scale(1.02); 
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    .style-title {
      font-size: 1.25rem;
      cursor: pointer;
      color: #007acc;
      display: inline-block;
      margin-bottom: .25rem;
    }
    .style-era { font-style: italic; margin-bottom: .5rem; }
    .style-description { margin-bottom: .5rem; }
    .style-links a { margin-right: .5rem; color: #007acc; }

    /* Hide legacy extras */
    .extra-under, .extra-counter, .extra-flash-intro,
    #main-table, .frame-nav, .frame-content,
    .beta-badge, .card-texture, .grid-overlay {
      display: none !important;
    }

    /* Gantt chart interactive styles */
    .mermaid .task, .mermaid text.taskText, .mermaid text.sectionTitle {
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .mermaid .task:hover {
      opacity: 0.8;
      transform: translateY(-2px);
    }
    
    .mermaid text.taskText:hover {
      font-weight: bold;
    }
    
    .mermaid text.sectionTitle:hover {
      font-weight: bold;
      text-decoration: underline;
    }
    
    /* Style cards interactive styles */
    .style-card {
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    
    .style-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    /* CSS editor styles */
    #css-editor {
      font-family: 'Courier New', monospace;
      line-height: 1.5;
      padding: 10px;
      border-radius: 4px;
      margin: 10px 0;
      border: 1px solid #ccc;
      background-color: #f9f9f9;
      max-width: 512vw;
      min-width: 300px;
      min-height: 150px;
      resize: vertical;
      
    }

    .css-editor {
      margin: auto;
      max-width: 800px;
      text-align: center;
      display: block;
    }
    
    body.dark-mode #css-editor {
      background-color: #2a2a2a;
      color: #e0e0e0;
      border-color: #444;
    }
    
    /* Tooltip to indicate clickable elements */
    [data-tooltip]:before {
      content: attr(data-tooltip);
      position: absolute;
      opacity: 0;
      transition: all 0.15s ease;
      padding: 5px 10px;
      color: #fff;
      border-radius: 4px;
      background: rgba(0,0,0,0.8);
      pointer-events: none;
      z-index: 10;
      white-space: nowrap;
      transform: translateY(10px);
    }
    
    [data-tooltip]:hover:before {
      opacity: 1;
      transform: translateY(0);
    }
    
    /* Add tooltips to Gantt elements */
    .mermaid .task, .mermaid text.taskText {
      position: relative;
    }

    /* Container for all ads */
.ad-group {
width: 80%;
margin: 2rem auto;
padding: 1rem;
border-radius: var(--rounded);
background-color: var(--content-bg);
box-shadow: 0 4px 8px var(--shadow-dark), 0 2px 4px var(--shadow-light);
}

/* Each ad line */
.ad-group .ad-line {
margin: 0.75rem 0;
padding: 0.75rem 1rem;
background-color: var(--bg-color);

transition: transform 0.3s ease;
border: 1px solid var(--accent-color);
}

/* Hover effect for ad lines */
.ad-group .ad-line:hover {
transform: translateY(-2px);
box-shadow: 0 4px 6px var(--shadow-dark);
}

/* Link styling */
.ad-group .ad-line a {
display: block;
color: var(--text-color);
font-weight: 600;
text-decoration: none;
transition: color 0.3s ease;
}

/* Link hover state */
.ad-group .ad-line a:hover {
color: var(--text-color);
text-decoration: underline;
}

/* ===== Main Container & Layout ===== */
#main-core {
max-width: 1300px;
margin: 0 auto;
}

/* Ensure main content scrolls above video */
main {
position: relative;
max-width: 85%;
align-items: center;
justify-content: center;
padding: 0;                 /* Remove any padding */
margin: auto;                  /* Remove any margins */
top: 10vh;
}
  </style>

  <!-- Dynamic theme CSS will be injected here -->
  <style id="theme-style"></style>

  <!-- Add Mermaid JS library -->
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
</head>
<body>
  <div class="hero-section">
    <div class="video-background">
      <div id="traffic_videos">
        <video id="traffic_videos_1" muted playsinline webkit-playsinline></video>
        <video id="traffic_videos_2" muted playsinline webkit-playsinline></video>
      </div>
    </div>
  </div>
  <div class="content-wrapper">
    <div class="header-content" style="flex-basis:450px;">
      <h1>Interactive Web Design Styles Showcase</h1>
      <p>From then to now.</p>
      <p><small>Click a title or press <strong>Ctrl + Shift + Space</strong> to cycle styles</small></p>
    </div>
  </div>

  <nav aria-label="Jump to era" class="era-timeline">
    <h3>Web Design Evolution Timeline</h3>
    <div class="mermaid-wrapper">
      <div class="mermaid" id="era-timeline">
gantt
    title       Web Design History
    dateFormat  YYYY
    axisFormat  %Y
    todayMarker off
    
    section 1990s
    Vernacular / Geocities     :vernacular, 1991, 1995
    Table-Based Design         :table-frames, 1993, 1998
    Framesets                  :framesets, 1993, 1998
    Flash-Based Design         :flash, 1996, 2008
    
    section 2000s
    Web 2.0 Glossy             :web2, 2004, 2013
    Skeuomorphic               :skeuomorphic, 2004, 2013
    Swiss Style                :swiss, 2000, 2025
    Minimalist                 :minimalist, 2000, 2025
    
    section 2010s
    Responsive Design          :responsive, 2010, 2025
    Flat Design                :flat-design, 2010, 2025
    Parallax                   :parallax, 2012, 2016
    Single-Page App            :spa, 2012, 2016
    Progressive Web App        :pwa, 2015, 2025
    Cinematic                  :cinematic, 2010, 2019
    Brutalist                  :brutalist, 2015, 2025
    Neo-Brutalism              :neo-brutalism, 2015, 2025
    Corporate Memphis          :corporate-memphis, 2018, 2025
    WebGL & 3D                 :webgl-3d, 2015, 2025
    
    section 2020s
    Dark Mode                  :dark-mode, 2020, 2025
    Neumorphism                :neumorphism, 2020, 2021
    Glassmorphism              :glassmorphism, 2020, 2021
    Retro Web                  :retro-web, 2020, 2025
    Y2K Web                    :y2k-web, 2020, 2025
    Inclusive Design           :inclusive-design, 2010, 2025
    </div>
  </div>
</nav>

  <section class="css-editor">
    <h2>Current CSS</h2>
    <textarea id="css-editor" editable></textarea>
  </section>

  <main>
    <!-- All 26 style cards -->
    <article class="style-card" data-index="0" id="vernacular">
      <h3 class="style-title">Vernacular / Geocities</h3>
      <p class="style-era">1991–1995</p>
      <p class="style-description">
        Amateur pages built with tiled backgrounds, animated GIFs, “Under Construction” signs, and visitor counters.
      </p>
      <p class="style-links">
        <a href="https://en.wikipedia.org/wiki/GeoCities" target="_blank">GeoCities</a>
        <a href="https://en.wikipedia.org/wiki/Under_Construction" target="_blank">Under Construction</a>
      </p>
    </article>

    <article class="style-card" data-index="1" id="table-frames">
      <h3 class="style-title">Table-Based Design</h3>
      <p class="style-era">1993–1998</p>
      <p class="style-description">
        Using HTML tables to approximate multi-column layouts before CSS adoption.
      </p>
      <p class="style-links">
        <a href="https://en.wikipedia.org/wiki/HTML_table" target="_blank">HTML Tables</a>
        <a href="https://en.wikipedia.org/wiki/CSS" target="_blank">CSS</a>
      </p>
    </article>

    <article class="style-card" data-index="2" id="framesets">
      <h3 class="style-title">Framesets</h3>
      <p class="style-era">1993–1998</p>
      <p class="style-description">
        Splitting the browser window into independent panes—navigation, content, etc.
      </p>
      <p class="style-links">
        <a href="https://en.wikipedia.org/wiki/HTML_frame" target="_blank">HTML Frames</a>
        <a href="https://developer.mozilla.org/docs/Web/HTML/Element/frame" target="_blank">MDN Frames</a>
      </p>
    </article>

    <article class="style-card" data-index="3" id="flash">
      <h3 class="style-title">Flash-Based Design</h3>
      <p class="style-era">1996–2008</p>
      <p class="style-description">
        Rich animations, interactive menus, and full-screen intros created with Macromedia Flash.
      </p>
      <p class="style-links">
        <a href="https://en.wikipedia.org/wiki/Adobe_Flash" target="_blank">Adobe Flash</a>
        <a href="https://en.wikipedia.org/wiki/Adobe_Animate" target="_blank">Adobe Animate</a>
      </p>
    </article>

    <article class="style-card" data-index="4" id="web2">
      <h3 class="style-title">Web 2.0 Glossy</h3>
      <p class="style-era">2004–2013</p>
      <p class="style-description">
        Glossy buttons, drop shadows, reflections, stock-photo headers, and “beta” tags.
      </p>
      <p class="style-links">
        <a href="https://en.wikipedia.org/wiki/Web_2.0" target="_blank">Web 2.0</a>
        <a href="https://www.wired.com/" target="_blank">WIRED</a>
      </p>
    </article>

    <article class="style-card" data-index="5" id="skeuomorphic">
      <h3 class="style-title">Skeuomorphic</h3>
      <p class="style-era">2004–2013</p>
      <p class="style-description">
        Interfaces mimicking real-world textures (leather, paper, metal).
      </p>
      <p class="style-links">
        <a href="https://en.wikipedia.org/wiki/Skeuomorph" target="_blank">Skeuomorph</a>
        <a href="https://en.wikipedia.org/wiki/Apple_Human_Interface_Guidelines#Skeuomorphism" target="_blank">iOS Skeuomorphism</a>
      </p>
    </article>

    <article class="style-card" data-index="6" id="swiss">
      <h3 class="style-title">Swiss Style</h3>
      <p class="style-era">2000s–present</p>
      <p class="style-description">
        Grid-based layouts, strong typography, and generous whitespace.
      </p>
      <p class="style-links">
        <a href="https://en.wikipedia.org/wiki/Swiss_Style" target="_blank">International Typographic Style</a>
        <a href="https://en.wikipedia.org/wiki/Helvetica" target="_blank">Helvetica</a>
      </p>
    </article>

    <article class="style-card" data-index="7" id="minimalist">
      <h3 class="style-title">Minimalist</h3>
      <p class="style-era">2000s–present</p>
      <p class="style-description">
        Stripping interfaces to essentials—white space, high-contrast typography, and minimal UI elements.
      </p>
      <p class="style-links">
        <a href="https://www.nngroup.com/articles/minimalist-web-design/" target="_blank">NNG Guide</a>
        <a href="https://en.wikipedia.org/wiki/Minimalism" target="_blank">Minimalism</a>
      </p>
    </article>

    <article class="style-card" data-index="8" id="responsive">
      <h3 class="style-title">Responsive</h3>
      <p class="style-era">2010–present</p>
      <p class="style-description">
        Fluid grids, flexible images, and CSS media queries ensure layouts adapt.
      </p>
      <p class="style-links">
        <a href="https://en.wikipedia.org/wiki/Responsive_web_design" target="_blank">Responsive</a>
        <a href="https://developer.mozilla.org/docs/Web/CSS/Media_Queries" target="_blank">MDN Media Queries</a>
      </p>
    </article>

    <article class="style-card" data-index="9" id="mobile-first">
      <h3 class="style-title">Mobile-First</h3>
      <p class="style-era">2010–present</p>
      <p class="style-description">
        Designing for small screens first, then enhancing for larger viewports.
      </p>
      <p class="style-links">
        <a href="https://en.wikipedia.org/wiki/Mobile-first_design" target="_blank">Mobile-First</a>
        <a href="https://www.smashingmagazine.com/2011/01/guidelines-for-responsive-web-design/" target="_blank">Smashing Mag.</a>
      </p>
    </article>

    <article class="style-card" data-index="10" id="flat-design">
      <h3 class="style-title">Flat Design</h3>
      <p class="style-era">2010–present</p>
      <p class="style-description">
        Minimalist UI with simple elements, flat colors, no textures.
      </p>
      <p class="style-links">
        <a href="https://en.wikipedia.org/wiki/Flat_design" target="_blank">Flat Design</a>
        <a href="https://en.wikipedia.org/wiki/Metro_(design_language)" target="_blank">Metro UI</a>
      </p>
    </article>

    <article class="style-card" data-index="11" id="semi-flat">
      <h3 class="style-title">Semi-Flat</h3>
      <p class="style-era">2010–present</p>
      <p class="style-description">
        Flat foundations augmented with subtle shadows or minimal gradients.
      </p>
      <p class="style-links">
        <a href="https://en.wikipedia.org/wiki/Flat_design#Flat_2.0" target="_blank">Flat 2.0</a>
        <a href="https://uxplanet.org/semi-flat-design-principles-and-examples-6d1d90d82469" target="_blank">UX Planet</a>
      </p>
    </article>

    <article class="style-card" data-index="12" id="parallax">
      <h3 class="style-title">Parallax</h3>
      <p class="style-era">2012–2016</p>
      <p class="style-description">
        Layered backgrounds move at different speeds for depth.
      </p>
      <p class="style-links">
        <a href="https://en.wikipedia.org/wiki/Parallax_scrolling" target="_blank">Parallax</a>
        <a href="https://developer.mozilla.org/docs/Web/CSS/transform-function/translate3d" target="_blank">MDN</a>
      </p>
    </article>

    <article class="style-card" data-index="13" id="spa">
      <h3 class="style-title">Single-Page App</h3>
      <p class="style-era">2012–2016</p>
      <p class="style-description">
        JavaScript-driven sites loading content dynamically on one page.
      </p>
      <p class="style-links">
        <a href="https://en.wikipedia.org/wiki/Single-page_application" target="_blank">SPA</a>
        <a href="https://angular.io/guide/architecture" target="_blank">Angular</a>
      </p>
    </article>

    <article class="style-card" data-index="14" id="pwa">
      <h3 class="style-title">Progressive Web App</h3>
      <p class="style-era">2015–present</p>
      <p class="style-description">
        App-like experiences with service workers, offline support, push notifications.
      </p>
      <p class="style-links">
        <a href="https://en.wikipedia.org/wiki/Progressive_web_app" target="_blank">PWA</a>
        <a href="https://web.dev/what-are-pwas/" target="_blank">web.dev</a>
      </p>
    </article>

    <article class="style-card" data-index="15" id="cinematic">
      <h3 class="style-title">Cinematic</h3>
      <p class="style-era">2010s</p>
      <p class="style-description">
        Full-screen video headers, ambient soundscapes, story layouts.
      </p>
      <p class="style-links">
        <a href="https://en.wikipedia.org/wiki/Video_background" target="_blank">Video Background</a>
        <a href="https://webflow.com/blog/video-backgrounds" target="_blank">Webflow</a>
      </p>
    </article>

    <article class="style-card" data-index="16" id="brutalist">
      <h3 class="style-title">Brutalist</h3>
      <p class="style-era">2015–present</p>
      <p class="style-description">
        Stark pages emphasizing raw HTML, plain fonts, bare-bones layout.
      </p>
      <p class="style-links">
        <a href="https://en.wikipedia.org/wiki/Brutalist_Web_Design" target="_blank">Brutalist Web</a>
        <a href="https://verpex.com/blog/brutalist-web-design/" target="_blank">Verpex</a>
      </p>
    </article>

    <article class="style-card" data-index="17" id="neo-brutalism">
      <h3 class="style-title">Neo-Brutalism</h3>
      <p class="style-era">2015–present</p>
      <p class="style-description">
        Brutalist structure combined with neon or saturated color accents.
      </p>
      <p class="style-links">
        <a href="https://web.dev/neo-brutalism/" target="_blank">web.dev</a>
        <a href="https://fireart.studio/blog/neo-brutalism/" target="_blank">Fireart</a>
      </p>
    </article>

    <article class="style-card" data-index="18" id="dark-mode">
      <h3 class="style-title">Dark Mode</h3>
      <p class="style-era">2020–present</p>
      <p class="style-description">
        Light-on-dark color schemes reduce eye strain and feel modern.
      </p>
      <p class="style-links">
        <a href="https://bluecompass.com/articles/dark-mode-web-design/" target="_blank">Bluecompass</a>
        <a href="https://css-tricks.com/dark-modes-with-css/" target="_blank">CSS-Tricks</a>
      </p>
    </article>

    <article class="style-card" data-index="19" id="neumorphism">
      <h3 class="style-title">Neumorphism</h3>
      <p class="style-era">2020</p>
      <p class="style-description">
        Soft inner/outer shadows create embossed UI elements.
      </p>
      <p class="style-links">
        <a href="https://en.wikipedia.org/wiki/Neumorphism" target="_blank">Wikipedia</a>
        <a href="https://uxdesign.cc/neumorphism-in-user-interfaces-b47cef3bf3a6" target="_blank">UX Design</a>
      </p>
    </article>

    <article class="style-card" data-index="20" id="glassmorphism">
      <h3 class="style-title">Glassmorphism</h3>
      <p class="style-era">2020</p>
      <p class="style-description">
        Translucent panels with backdrop blur convey depth.
      </p>
      <p class="style-links">
        <a href="https://www.nngroup.com/articles/glassmorphism/" target="_blank">NNG</a>
        <a href="https://css-tricks.com/glassmorphism-using-backdrop-filter/" target="_blank">CSS-Tricks</a>
      </p>
    </article>

    <article class="style-card" data-index="21" id="corporate-memphis">
      <h3 class="style-title">Corporate Memphis</h3>
      <p class="style-era">2018–present</p>
      <p class="style-description">
        Flat geometric illustrations with bendy characters and bright color.
      </p>
      <p class="style-links">
        <a href="https://en.wikipedia.org/wiki/Corporate_Memphis" target="_blank">Wikipedia</a>
        <a href="https://medium.com/corporate-memphis" target="_blank">Medium</a>
      </p>
    </article>

    <article class="style-card" data-index="22" id="retro-web">
      <h3 class="style-title">Retro Web</h3>
      <p class="style-era">2020s</p>
      <p class="style-description">
        Nostalgic callbacks to ’90s/00s—pixel art, marquee text, neon palettes.
      </p>
      <p class="style-links">
        <a href="https://fireart.studio/blog/retro-web-design/" target="_blank">Fireart</a>
        <a href="https://99designs.com/blog/web-design/trends/nostalgic-web-design-trends/" target="_blank">99designs</a>
      </p>
    </article>

    <article class="style-card" data-index="23" id="y2k-web">
      <h3 class="style-title">Y2K Web</h3>
      <p class="style-era">2020s</p>
      <p class="style-description">
        Chrome buttons, metallic gradients, playful typography.
      </p>
      <p class="style-links">
        <a href="https://fireart.studio/blog/y2k-web-design/" target="_blank">Fireart</a>
        <a href="https://medium.com/y2k-web" target="_blank">Medium</a>
      </p>
    </article>

    <article class="style-card" data-index="24" id="webgl-3d">
      <h3 class="style-title">WebGL & 3D</h3>
      <p class="style-era">2015–present</p>
      <p class="style-description">
        Interactive 3D graphics, model viewers, VR/AR in browser.
      </p>
      <p class="style-links">
        <a href="https://en.wikipedia.org/wiki/WebGL" target="_blank">WebGL</a>
        <a href="https://threejs.org/" target="_blank">three.js</a>
      </p>
    </article>

    <article class="style-card" data-index="25" id="inclusive-design">
      <h3 class="style-title">Inclusive Design</h3>
      <p class="style-era">Ongoing</p>
      <p class="style-description">
        ARIA roles, semantic HTML, user-centric accessibility.
      </p>
      <p class="style-links">
        <a href="https://en.wikipedia.org/wiki/Accessible_design" target="_blank">Accessible Design</a>
        <a href="https://www.w3.org/WAI/fundamentals/accessibility-intro/" target="_blank">W3C</a>
      </p>
    </article>
  </main>

  <!-- jQuery & Migrate -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
  <script src="https://code.jquery.com/jquery-migrate-3.4.1.min.js"></script>
  <script src="./video.js"></script>

  <!-- Theme-switcher + CSS editor init -->
  <script>
  jQuery(function($) {
    try {
      // Video sources for cinematic theme
      var videoSources = [
        "https://assets.mixkit.co/videos/preview/mixkit-aerial-view-of-city-traffic-at-night-9161-large.mp4",
        "https://assets.mixkit.co/videos/preview/mixkit-highway-traffic-at-night-with-light-trails-time-lapse-10364-large.mp4"
      ];
      
      // Theme definitions
      var themes = [
        {
          name: "Vernacular",
          css: `
            body { 
              background: rgb(246, 243, 74);
              font-family: 'Comic Sans MS', 'Comic Sans', cursive;
            }
            .content-wrapper
              text-align: center; 
              background: yellow;
              border: 4px ridge blue;
              padding: 10px;
              margin: 10px;
              top: 10px;
              display: visible;
              position: relative;
            }
            .header-content h1 { 
              color: #ff0000; 
              text-shadow: 2px 2px 0 yellow;
              font-size: 15vw;
              margin-bottom: 5px;
            }
            .era-timeline { 
              display: block !important;
              background: #ffffff;
              opacity: 0.7;
            }
            .style-card {
              background: #ffffcc;
              border: 3px outset #cc9966;
            }
            .style-description {
              color: #333333;
            }
            .style-title {
              color: #990000;
              font-weight: bold;
            }
            .style-links a {
              color: #0000ff;
              text-decoration: underline;
            }
            .extra-under { display: block !important; }
          `
        },
        {
          name: "Table-Based Design",
          css: `
            body {
              font-family: Arial, sans-serif;
              background: #f0f0f0;
              color: #333;
            }
            main {
              display: table;
              width: 100%;
              border-collapse: collapse;
            }
            .style-card {
              display: table-cell;
              border: 1px solid #999;
              padding: 10px;
              background: white;
            }
            #main-table { display: block !important; }
          `
        },
        {
          name: "Framesets",
          css: `
            body {
              margin: 0;
              padding: 0;
              font-family: Verdana, sans-serif;
            }
            .frame-nav, .frame-content {
              display: block !important;
              position: fixed;
              border: 2px inset #ccc;
              background: #f0f0f0;
            }
            .frame-nav {
              left: 0;
              top: 0;
              width: 200px;
              height: 100%;
              overflow: auto;
              padding: 10px;
            }
            .frame-content {
              left: 200px;
              top: 0;
              width: calc(100% - 200px);
              height: 100%;
              overflow: auto;
              padding: 10px;
              background: white;
            }
            main {
              margin-left: 200px;
            }
          `
        },
        {
          name: "Flash-Based Design",
          css: `
            body {
              background: #000;
              color: #fff;
              font-family: Arial, sans-serif;
              text-align: center;
            }
            .extra-flash-intro { 
              display: block !important; 
              position: fixed;
              top: 0;
              left: 0;
              width: 100%;
              height: 100%;
              background: #000;
              z-index: 1000;
            }
            .style-card {
              background: #333;
              border-radius: 0;
              border: 1px solid #666;
              color: #fff;
            }
            .style-title {
              color: #ff9900;
            }
            .style-links a {
              color: #66ccff;
            }
          `
        },
        {
          name: "Web 2.0 Glossy",
          css: `
            body {
              font-family: 'Lucida Grande', Arial, sans-serif;
              background: #f6f6f6;
            }
            .style-card {
              border-radius: 8px;
              border: 1px solid #ddd;
              background: linear-gradient(to bottom, #ffffff 0%, #f6f6f6 100%);
              box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            }
            .style-title {
              color: #0066cc;
              text-shadow: 0 1px 0 white;
            }
            .beta-badge {
              display: inline-block !important;
              background: #ff6600;
              color: white;
              font-size: 10px;
              padding: 2px 5px;
              border-radius: 10px;
              margin-left: 5px;
              text-transform: uppercase;
              font-weight: bold;
            }
          `
        },
        {
          name: "Skeuomorphic",
          css: `
            body {
              
              font-family: 'Helvetica Neue', Arial, sans-serif;
            }
            .style-card {
              background: url('https://i.imgur.com/Ncrkb8L.png') repeat;
              border-radius: 5px;
              box-shadow: 0 3px 10px rgba(0,0,0,0.2);
              border: 1px solid #b8b8b8;
            }
            .card-texture {
              display: block !important;
              position: absolute;
              top: 0;
              left: 0;
              width: 100%;
              height: 100%;
              background: url('https://i.imgur.com/FL3SmIu.jpeg');
              opacity: 0.1;
              pointer-events: none;
            }
            .era-timeline {
              display: block !important;
              background: url('https://img.freepik.com/free-photo/white-gypsum-wall_1194-6990.jpg?t=st=1746443052~exp=1746446652~hmac=a2420a81ff31a63454846c9c05c450b65b5a3982ffc27fd89a63d2b85f7ca563&w=1380');
              pointer-events: none;
              
            }
          `
        },
        {
          name: "Swiss Style",
          css: `
            body {
              font-family: Helvetica, Arial, sans-serif;
              background: white;
              color: black;
              line-height: 1.5;
            }
            main {
              display: grid;
              grid-template-columns: repeat(12, 1fr);
              grid-gap: 20px;
            }
            .style-card {
              grid-column: span 4;
              background: white;
              border: none;
              border-bottom: 2px solid black;
              border-radius: 0;
              padding: 20px 0;
            }
            .style-title {
              font-size: 18px;
              font-weight: bold;
              color: black;
            }
            .grid-overlay {
              display: block !important;
              position: fixed;
              top: 0;
              left: 0;
              width: 100%;
              height: 100%;
              background: repeating-linear-gradient(
                90deg,
                rgba(255,0,0,0.03),
                rgba(255,0,0,0.03) 8.33%,
                transparent 8.33%,
                transparent 16.66%
              );
              pointer-events: none;
              z-index: 1000;
            }
          `
        },
        {
          name: "Minimalist",
          css: `
            body {
              font-family: 'Inter', sans-serif;
              background: white;
              color: #333;
              line-height: 1.6;
            }
            .style-card {
              background: white;
              border: none;
              border-radius: 0;
              padding: 30px 0;
              box-shadow: none;
            }
            .style-title {
              font-weight: 300;
              font-size: 24px;
              color: #000;
            }
            .style-description {
              font-weight: 300;
            }
            .style-links a {
              color: #000;
              text-decoration: none;
              border-bottom: 1px solid #000;
              padding-bottom: 2px;
            }
          `
        },
        {
          name: "Responsive",
          css: `
            body {
              font-family: 'Open Sans', sans-serif;
              background: #f9f9f9;
            }
            main {
              display: flex;
              flex-wrap: wrap;
              justify-content: space-between;
            }
            .style-card {
              flex: 0 0 calc(33.333% - 20px);
              margin-bottom: 30px;
              background: white;
              border-radius: 5px;
              box-shadow: 0 2px 5px rgba(0,0,0,0.1);
              transition: all 0.3s ease;
            }
            @media (max-width: 992px) {
              .style-card {
                flex: 0 0 calc(50% - 15px);
              }
            }
            @media (max-width: 576px) {
              .style-card {
                flex: 0 0 100%;
              }
            }
          `
        },
        {
          name: "Mobile-First",
          css: `
            body {
              font-family: 'Roboto', sans-serif;
              font-size: 16px;
              line-height: 1.5;
              color: #333;
              background: #f5f5f5;
            }
            main {
              padding: 10px;
            }
            .style-card {
              width: 100%;
              margin-bottom: 15px;
              background: white;
              border-radius: 5px;
              box-shadow: 0 1px 3px rgba(0,0,0,0.1);
              padding: 15px;
            }
            @media (min-width: 768px) {
              main {
                padding: 20px;
                display: flex;
                flex-wrap: wrap;
                justify-content: space-between;
              }
              .style-card {
                width: calc(50% - 10px);
              }
            }
            @media (min-width: 992px) {
              .style-card {
                width: calc(33.333% - 15px);
              }
            }
          `
        },
        {
          name: "Flat Design",
          css: `
            body {
              font-family: 'Segoe UI', 'Roboto', sans-serif;
              background: #f9f9f9;
              color: #333;
            }
            .style-card {
              background: white;
              border: none;
              border-radius: 2px;
              box-shadow: 0 1px 2px rgba(0,0,0,0.1);
              transition: all 0.2s ease;
            }
            .style-title {
              color: #0078d7;
            }
            .style-links a {
              color: #0078d7;
              text-decoration: none;
            }
          `
        },
        {
          name: "Semi-Flat",
          css: `
            body {
              font-family: 'SF Pro Text', 'Roboto', sans-serif;
              background: #f5f5f5;
              color: #333;
            }
            .style-card {
              background: white;
              border: none;
              border-radius: 8px;
              box-shadow: 0 2px 8px rgba(0,0,0,0.1);
              transition: all 0.3s ease;
            }
            .style-card:hover {
              box-shadow: 0 5px 15px rgba(0,0,0,0.1);
              transform: translateY(-2px);
            }
            .style-title {
              color: #007aff;
            }
          `
        },
        {
          name: "Parallax",
          css: `
            body {
              font-family: 'Montserrat', sans-serif;
              background: #222;
              color: white;
              perspective: 1px;
              height: 100vh;
              overflow-x: hidden;
              overflow-y: auto;
            }
            main {
              transform-style: preserve-3d;
            }
            .style-card {
              background: rgba(255,255,255,0.9);
              color: #333;
              border: none;
              border-radius: 5px;
              box-shadow: 0 5px 15px rgba(0,0,0,0.2);
              transform: translateZ(0);
            }
          `
        },
        {
          name: "Single-Page App",
          css: `
            body {
              font-family: 'Roboto', sans-serif;
              background: #fafafa;
              color: #333;
              padding-top: 60px;
            }
            header {
              position: fixed;
              top: 0;
              left: 0;
              width: 100%;
              background: white;
              box-shadow: 0 2px 5px rgba(0,0,0,0.1);
              z-index: 100;
              padding: 15px 0;
            }
            .style-card {
              background: white;
              border: none;
              border-radius: 2px;
              box-shadow: 0 1px 3px rgba(0,0,0,0.12);
              transition: all 0.3s cubic-bezier(.25,.8,.25,1);
            }
          `
        },
        {
          name: "Progressive Web App",
          css: `
            body {
              font-family: 'Google Sans', 'Roboto', sans-serif;
              background: #f5f5f5;
              color: #202124;
              margin: 0;
              padding: 0;
            }
            header {
              background: #1a73e8;
              color: white;
              padding: 16px;
              box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            }
            .style-card {
              background: white;
              border-radius: 8px;
              box-shadow: 0 1px 2px rgba(0,0,0,0.1);
              margin-bottom: 16px;
              overflow: hidden;
            }
          `
        },
        {
          name: "Cinematic",
          css: `
            body {
              font-family: 'Playfair Display', serif;
              color: #fff;
              text-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.7);
              margin: 0;
              padding: 0;
              background: #000;
            }
            .hero-section, .content-wrapper {
              display: block !important;
            }
            .era-timeline {
              top: 0;
              left: 0;
              width: 80%;
              margin: auto;
              padding: 2rem;
              overflow: hidden;
              background: rgba(255, 255, 255, 0.5);
              backdrop-filter: 2px;
              /* display: none; /* Hidden by default, shown in cinematic mode */
            }
            .video-background {
              position: fixed;
              top: 0;
              left: 0;
              width: 100%;
              height: 100%;
              z-index: -1;
              overflow: hidden;
            }
            .style-card {
              background: rgba(0,0,0,0.7);
              border: 1px solid rgba(255,255,255,0.2);
              color: #666;
            }
            .style-title {
              color: #333;
              font-size: 24px;
            }
          `
        },
        {
          name: "Brutalist",
          css: `
            body {
              font-family: monospace;
              background: white;
              color: black;
              margin: 0;
              padding: 20px;
              line-height: 1.2;
            }
            main {
              max-width: none;
              margin: 0;
              padding: 0;
            }
            .style-card {
              background: white;
              border: 2px solid black;
              border-radius: 0;
              padding: 20px;
              margin-bottom: 20px;
              box-shadow: none;
            }
          `
        },
        {
          name: "Neo-Brutalism",
          css: `
            body {
              font-family: 'Arial', sans-serif;
              background: #ffde59;
              color: black;
            }
            .style-card {
              background: white;
              border: 3px solid black;
              border-radius: 0;
              box-shadow: 5px 5px 0 black;
              transform: rotate(-1deg);
              transition: all 0.2s ease;
            }
          `
        },
        {
          name: "Dark Mode",
          css: `
            body {
              font-family: 'SF Pro Text', 'Roboto', sans-serif;
              background: #121212;
              color: #e0e0e0;
            }
            .style-card {
              background: #1e1e1e;
              border: 1px solid #333;
              border-radius: 8px;
              color: #e0e0e0;
            }
            .style-title {
              color: #bb86fc;
            }
            .style-links a {
              color: #03dac6;
            }
            body.dark-mode #css-editor {
              background-color: #2a2a2a;
              color: #e0e0e0;
              border-color: #444;
            }
          `
        },
        {
          name: "Neumorphism",
          css: `
            body {
              font-family: 'Poppins', sans-serif;
              background: #e0e5ec;
              color: #333;
            }
            .style-card {
              background: #e0e5ec;
              border-radius: 15px;
              box-shadow: 8px 8px 15px #a3b1c6, -8px -8px 15px #ffffff;
              border: none;
              padding: 20px;
            }
            .style-title {
              color: #555;
            }
            .style-links a {
              color: #555;
              text-decoration: none;
            }
          `
        },
        {
          name: "Glassmorphism",
          css: `
            body {
              font-family: 'Segoe UI', 'Roboto', sans-serif;
              background: #f9f9f9;
              color: #333;
            }
            .style-card {
              background: white;
              border: none;
              border-radius: 2px;
              box-shadow: 0 1px 2px rgba(0,0,0,0.1);
              transition: all 0.2s ease;
            }
            .style-title {
              color: #0078d7;
            }
            .style-links a {
              color: #0078d7;
              text-decoration: none;
            }
          `
        },
        {
          name: "Corporate Memphis",
          css: `
            body {
              font-family: 'Arial', sans-serif;
              background: #ffde59;
              color: black;
            }
            .style-card {
              background: white;
              border: 3px solid black;
              border-radius: 0;
              box-shadow: 5px 5px 0 black;
              transform: rotate(-1deg);
              transition: all 0.2s ease;
            }
          `
        },
        {
          name: "Retro Web",
          css: `
            body {
              font-family: 'Arial', sans-serif;
              background: #ffde59;
              color: black;
            }
            .style-card {
              background: white;
              border: 3px solid black;
              border-radius: 0;
              box-shadow: 5px 5px 0 black;
              transform: rotate(-1deg);
              transition: all 0.2s ease;
            }
          `
        },
        {
          name: "Y2K Web",
          css: `
            body {
              font-family: 'Arial', sans-serif;
              background: #ffde59;
              color: black;
            }
            .style-card {
              background: white;
              border: 3px solid black;
              border-radius: 0;
              box-shadow: 5px 5px 0 black;
              transform: rotate(-1deg);
              transition: all 0.2s ease;
            }
          `
        },
        {
          name: "WebGL & 3D",
          css: `
            body {
              font-family: 'Arial', sans-serif;
              background: #ffde59;
              color: black;
            }
            .style-card {
              background: white;
              border: 3px solid black;
              border-radius: 0;
              box-shadow: 5px 5px 0 black;
              transform: rotate(-1deg);
              transition: all 0.2s ease;
            }
          `
        },
        {
          name: "Inclusive Design",
          css: `
            body {
              font-family: 'Arial', sans-serif;
              background: #ffde59;
              color: black;
            }
            .style-card {
              background: white;
              border: 3px solid black;
              border-radius: 0;
              box-shadow: 5px 5px 0 black;
              transform: rotate(-1deg);
              transition: all 0.2s ease;
            }
          `
        }
      ];
      
      var $themeStyle = $('#theme-style'),
          $cssEditor = $('#css-editor'),
          $heroSection = $('.hero-section'),
          $contentWrapper = $('.content-wrapper'),
          $video1 = $('#traffic_videos_1'),
          $video2 = $('#traffic_videos_2');
      
      var current = 0;

      // Format CSS for readability in the editor
      function formatCss(css) {
        try {
          // Format the CSS
          const formattedCss = css
            .replace(/}/g, '}\n\n')
            .replace(/{/g, ' {\n  ')
            .replace(/;(?!.*\n)/g, ';\n  ')
            .replace(/:/g, ': ')
            .replace(/,(?=\S)/g, ', ')
            .trim();
          
          // Send Google Analytics event for successful CSS formatting
          if (typeof gtag === 'function') {
            gtag('event', 'css_formatting', {
              'event_category': 'CSS Editor',
              'event_label': 'CSS Formatted Successfully',
              'value': css.length
            });
          }
          
          return formattedCss;
        } catch (e) {
          console.error('formatCss failed:', e);
          
          // Send Google Analytics event for CSS formatting error
          if (typeof gtag === 'function') {
            gtag('event', 'error', {
              'event_category': 'CSS Editor',
              'event_label': 'CSS Formatting Error',
              'value': 0,
              'description': e.message || 'Unknown error'
            });
          }
          
          return css;
        }
      }

      // Add a dark mode toggle to the UI
      $('.header-content').append(`
        <div class="dark-mode-toggle">
          <label class="switch">
            <input type="checkbox" id="dark-mode-toggle">
            <span class="slider round"></span>
          </label>
          <span>Dark Mode</span>
        </div>
      `);

      // Add dark mode toggle styles
      $('head').append(`
        <style>
          .dark-mode-toggle {
            display: flex;
            align-items: center;
            margin-top: 1rem;
          }
          .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
            margin-right: 10px;
          }
          .switch input {
            opacity: 0;
            width: 0;
            height: 0;
          }
          .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
          }
          .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
          }
          input:checked + .slider {
            background-color: #2196F3;
          }
          input:checked + .slider:before {
            transform: translateX(26px);
          }
          .slider.round {
            border-radius: 34px;
          }
          .slider.round:before {
            border-radius: 50%;
          }
        </style>
      `);

      // Modify theme definitions to include custom dark variants for each theme
      themes.forEach(theme => {
        // Store the original (light) CSS
        theme.lightCss = theme.css;
        
        // Create a custom dark version based on the theme
        switch(theme.name) {
          case "Dark Mode":
            // Dark Mode theme is already dark, just enhance it
            theme.darkCss = `
              body {
                background: #121212;
                color: #e0e0e0;
              }
              .style-card {
                background: #1e1e1e;
                border: 1px solid #333;
                border-radius: 8px;
                color: #e0e0e0;
              }
              .style-title {
                color: #bb86fc;
              }
              .style-links a {
                color: #03dac6;
              }
              body.dark-mode #css-editor {
                background-color: #2a2a2a;
                color: #e0e0e0;
                border-color: #444;
              }
            `;
            break;
            
          case "Vernacular":
            theme.darkCss = `
              body { 
                background: rgb(46, 43, 0);
                font-family: 'Comic Sans MS', 'Comic Sans', cursive;
                color: #f0f0f0;
              }
              .content-wrapper {
                text-align: center; 
                background: rgb(70, 70, 0);
                border: 4px ridge rgb(0, 0, 150);
                padding: 10px;
                margin: 10px;
              }
              .header-content h1 { 
                color: #ff6666; 
                text-shadow: 2px 2px 0 rgb(70, 70, 0);
              }
              .style-card {
                background: #333300;
                border: 3px outset #664400;
                color: #f0f0f0;
              }
              .style-title {
                color: #ff9999;
              }
              .style-links a {
                color: #99ccff;
              }
              #css-editor {
                background-color: #333300;
                color: #f0f0f0;
                border-color: #664400;
              }
              .mermaid {
                background: #333300;
                color: #f0f0f0;
              }
            `;
            break;
            
          case "Skeuomorphic":
            theme.darkCss = `
              body {
                background: #222;
                font-family: 'Helvetica Neue', Arial, sans-serif;
                color: #e0e0e0;
              }
              .style-card {
                background: url('https://i.imgur.com/Ncrkb8L.png') repeat;
                border-radius: 5px;
                box-shadow: 0 3px 10px rgba(0,0,0,0.5);
                border: 1px solid #444;
                color: #e0e0e0;
              }
              .card-texture {
                display: block !important;
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: url('https://i.imgur.com/FL3SmIu.jpeg');
                opacity: 0.05;
                pointer-events: none;
              }
              .style-title {
                color: #bb86fc;
              }
              #css-editor {
                background-color: #333;
                color: #e0e0e0;
                border-color: #444;
                box-shadow: inset 0 2px 5px rgba(0,0,0,0.5);
              }
            `;
            break;
            
          case "Swiss Style":
            theme.darkCss = `
              body {
                font-family: Helvetica, Arial, sans-serif;
                background: #121212;
                color: white;
                line-height: 1.5;
              }
              main {
                display: grid;
                grid-template-columns: repeat(12, 1fr);
                grid-gap: 20px;
              }
              .style-card {
                grid-column: span 4;
                background: #1a1a1a;
                border: none;
                border-bottom: 2px solid white;
                border-radius: 0;
                padding: 20px 0;
                color: white;
              }
              .style-title {
                font-size: 18px;
                font-weight: bold;
                color: white;
              }
              .style-links a {
                color: #bb86fc;
              }
              #css-editor {
                background-color: #1a1a1a;
                color: white;
                border-color: white;
              }
            `;
            break;
            
          case "Minimalist":
            theme.darkCss = `
              body {
                font-family: 'Inter', sans-serif;
                background: #121212;
                color: #e0e0e0;
                line-height: 1.6;
              }
              .style-card {
                background: #1a1a1a;
                border: none;
                border-radius: 0;
                padding: 30px 0;
                box-shadow: none;
                color: #e0e0e0;
              }
              .style-title {
                font-weight: 300;
                font-size: 24px;
                color: #fff;
              }
              .style-description {
                font-weight: 300;
              }
              .style-links a {
                color: #bb86fc;
                text-decoration: none;
                border-bottom: 1px solid #bb86fc;
                padding-bottom: 2px;
              }
              #css-editor {
                background-color: #1a1a1a;
                color: #e0e0e0;
                border: none;
                border-bottom: 1px solid #333;
              }
            `;
            break;
            
          case "Brutalist":
            theme.darkCss = `
              body {
                font-family: monospace;
                background: black;
                color: white;
                margin: 0;
                padding: 20px;
                line-height: 1.2;
              }
              main {
                max-width: none;
                margin: 0;
                padding: 0;
              }
              .style-card {
                background: black;
                border: 2px solid white;
                border-radius: 0;
                padding: 20px;
                margin-bottom: 20px;
                box-shadow: none;
                color: white;
              }
              .style-title {
                color: #ff6666;
              }
              .style-links a {
                color: #66ff66;
              }
              #css-editor {
                background-color: black;
                color: white;
                border: 2px solid white;
                font-family: monospace;
              }
            `;
            break;
            
          case "Neo-Brutalism":
            theme.darkCss = `
              body {
                font-family: 'Arial', sans-serif;
                background: #121212;
                color: #e0e0e0;
              }
              .style-card {
                background: #1a1a1a;
                border: 3px solid #bb86fc;
                border-radius: 0;
                box-shadow: 5px 5px 0 #bb86fc;
                transform: rotate(-1deg);
                transition: all 0.2s ease;
                color: #e0e0e0;
              }
              .style-title {
                color: #bb86fc;
              }
              .style-links a {
                color: #03dac6;
              }
              #css-editor {
                background-color: #1a1a1a;
                color: #e0e0e0;
                border: 3px solid #bb86fc;
                box-shadow: 5px 5px 0 #bb86fc;
              }
            `;
            break;
            
          case "Neumorphism":
            theme.darkCss = `
              body {
                font-family: 'Poppins', sans-serif;
                background: #2d2d2d;
                color: #e0e0e0;
              }
              .style-card {
                background: #2d2d2d;
                border-radius: 15px;
                box-shadow: 8px 8px 15px #1a1a1a, -8px -8px 15px #3d3d3d;
                border: none;
                padding: 20px;
                color: #e0e0e0;
              }
              .style-title {
                color: #bb86fc;
              }
              .style-links a {
                color: #03dac6;
                text-decoration: none;
              }
              #css-editor {
                background: #2d2d2d;
                border-radius: 15px;
                box-shadow: inset 5px 5px 10px #1a1a1a, inset -5px -5px 10px #3d3d3d;
                border: none;
                color: #e0e0e0;
              }
            `;
            break;
            
          case "Glassmorphism":
            theme.darkCss = `
              body {
                font-family: 'Segoe UI', 'Roboto', sans-serif;
                background: linear-gradient(135deg, #121212, #2d2d2d);
                color: #e0e0e0;
              }
              .style-card {
                background: rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.1);
                border-radius: 10px;
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
                color: #e0e0e0;
              }
              .style-title {
                color: #bb86fc;
              }
              .style-links a {
                color: #03dac6;
              }
              #css-editor {
                background: rgba(255, 255, 255, 0.05);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.1);
                color: #e0e0e0;
              }
            `;
            break;
            
          default:
            // For other themes, create a generic dark variant
            theme.darkCss = `
              body {
                background-color: #121212;
                color: #e0e0e0;
              }
              .style-card {
                background-color: #1e1e1e;
                border-color: #333;
                color: #e0e0e0;
              }
              .style-title {
                color: #bb86fc;
              }
              .style-links a {
                color: #03dac6;
              }
              #css-editor {
                background-color: #2a2a2a;
                color: #e0e0e0;
                border-color: #444;
              }
            ` + theme.css;
        }
      });

      // Apply theme by index
      function applyTheme(index) {
        try {
          if (index < 0 || index >= themes.length) {
            console.error('Invalid theme index:', index);
            return;
          }
          
          current = index;
          var theme = themes[current];
          
          console.log('Applying theme:', theme.name);
          
          // Remove all theme-related classes from body
          $('body').removeClass(function(index, className) {
            return (className.match(/(^|\s)theme-\S+/g) || []).join(' ');
          });
          
          // Add current theme class to body
          $('body').addClass('theme-' + theme.name.toLowerCase().replace(/\s+/g, '-'));
          
          // Check dark mode state
          const isDarkMode = $('#dark-mode-toggle').is(':checked');
          
          // Apply appropriate CSS based on dark mode state
          const cssToApply = isDarkMode ? theme.darkCss : theme.lightCss;
          $themeStyle.html(cssToApply);
          
          // Update CSS editor with formatted CSS
          $cssEditor.val(formatCss(cssToApply));
          
          // Handle cinematic mode
          if (theme.name === 'Cinematic') {
            $heroSection.show();
            $contentWrapper.show();
            startCinematicVideos();
          } else {
            $heroSection.hide();
          }
          
          // Update theme name display if it exists
          if ($('#current-theme').length) {
            $('#current-theme').text(theme.name + (isDarkMode ? ' (Dark)' : ' (Light)'));
          }
          
          // Send Google Analytics event for theme change
          if (typeof gtag === 'function') {
            gtag('event', 'theme_change', {
              'event_category': 'Theme Selection',
              'event_label': theme.name + (isDarkMode ? ' (Dark)' : ' (Light)'),
              'value': index
            });
          }
          
        } catch (e) {
          console.error('applyTheme failed:', e);
        }
      }

      // Preload videos for cinematic mode
      function preloadCinematicVideos() {
        try {
          console.log('Preloading cinematic videos...');
          $video1.attr('src', videoSources[0]);
          $video2.attr('src', videoSources[1]);
          
          $video1.on('loadeddata', function() {
            console.log('Video 1 loaded successfully');
          }).on('error', function(e) {
            console.error('Error loading video 1:', e);
          });
          
          $video2.on('loadeddata', function() {
            console.log('Video 2 loaded successfully');
          }).on('error', function(e) {
            console.error('Error loading video 2:', e);
          });
        } catch (e) {
          console.error('Failed to preload cinematic videos:', e);
        }
      }

      // Initialize cinematic video playback
      function startCinematicVideos() {
        try {
          console.log('Starting cinematic video playback');
          
          // Start with video 1
          $video1.css('opacity', '1');
          $video1[0].play().catch(function(e) {
            console.error('Failed to play video 1:', e);
          });
          
          // Send Google Analytics event for video playback start
          if (typeof gtag === 'function') {
            gtag('event', 'video_playback', {
              'event_category': 'Cinematic Theme',
              'event_label': 'Started Video Playback',
              'value': 1
            });
          }
          
          // Set up video switching
          $video1.on('ended', function() {
            console.log('Video 1 ended, switching to video 2');
            $video1.css('opacity', '0');
            $video2.css('opacity', '1');
            $video2[0].play().catch(function(e) {
              console.error('Failed to play video 2:', e);
            });
            
            // Send Google Analytics event for video switch
            if (typeof gtag === 'function') {
              gtag('event', 'video_switch', {
                'event_category': 'Cinematic Theme',
                'event_label': 'Switched to Video 2',
                'value': 2
              });
            }
          });
          
          $video2.on('ended', function() {
            console.log('Video 2 ended, switching to video 1');
            $video2.css('opacity', '0');
            $video1.css('opacity', '1');
            $video1[0].currentTime = 0;
            $video1[0].play().catch(function(e) {
              console.error('Failed to replay video 1:', e);
            });
            
            // Send Google Analytics event for video switch
            if (typeof gtag === 'function') {
              gtag('event', 'video_switch', {
                'event_category': 'Cinematic Theme',
                'event_label': 'Switched to Video 1',
                'value': 1
              });
            }
          });
        } catch (e) {
          console.error('Failed to start cinematic videos:', e);
          
          // Send Google Analytics event for video error
          if (typeof gtag === 'function') {
            gtag('event', 'video_error', {
              'event_category': 'Cinematic Theme',
              'event_label': e.message || 'Unknown error',
              'value': 0
            });
          }
        }
      }

      // Preload cinematic videos on page load
      preloadCinematicVideos();

      // Initialize with first theme
      applyTheme(0);

      // Click handler for style cards
      $('.style-card').on('click', function() {
        var index = $(this).data('index');
        applyTheme(index);
      });

      // Click handler for timeline elements in the Gantt chart
      try {
        $('.mermaid').on('click', '.task, .taskText', function() {
          var taskId = $(this).attr('id') || '';
          
          // Extract theme ID from task ID
          var themeId = taskId.split('-')[0];
          
          // Find matching theme index
          var themeIndex = themes.findIndex(function(theme) {
            return theme.name.toLowerCase().replace(/\s+/g, '-') === themeId;
          });
          
          if (themeIndex >= 0) {
            applyTheme(themeIndex);
            console.log('Theme applied from Gantt chart:', themes[themeIndex].name);
            
            // Send Google Analytics event for Gantt chart theme selection
            if (typeof gtag === 'function') {
              gtag('event', 'gantt_chart_selection', {
                'event_category': 'Theme Navigation',
                'event_label': themes[themeIndex].name,
                'value': themeIndex
              });
            }
          }
        });
      } catch (e) {
        console.error('Failed to set up Gantt chart click handlers:', e);
        
        // Send Google Analytics event for error
        if (typeof gtag === 'function') {
          gtag('event', 'error', {
            'event_category': 'Error Handling',
            'event_label': 'Gantt Chart Click Handler Error',
            'value': 0,
            'description': e.message || 'Unknown error'
          });
        }
      }

      // Keyboard shortcut to cycle through themes
      try {
        $(document).on('keydown', function(e) {
          // Ctrl + Shift + Space
          if (e.ctrlKey && e.shiftKey && e.keyCode === 32) {
            var nextIndex = (current + 1) % themes.length;
            applyTheme(nextIndex);
            console.log('Theme cycled to:', themes[nextIndex].name);
            
            // Send Google Analytics event
            if (typeof gtag === 'function') {
              gtag('event', 'keyboard_shortcut', {
                'event_category': 'Theme Navigation',
                'event_label': themes[nextIndex].name,
                'value': nextIndex
              });
            }
            
            e.preventDefault();
          }
        });
      } catch (e) {
        console.error('Failed to set up keyboard shortcuts:', e);
      }

      // CSS Editor functionality
      // Apply custom CSS when the editor content changes
      $cssEditor.on('input', function() {
        var customCss = $(this).val();
        $themeStyle.html(customCss);
        console.log('Custom CSS applied');
      });

      // Initialize Mermaid
      if (typeof mermaid !== 'undefined') {
        mermaid.initialize({
          startOnLoad: true,
          theme: 'default',
          gantt: {
            titleTopMargin: 25,
            barHeight: 20,
            barGap: 4,
            topPadding: 50,
            sidePadding: 50
          }
        });
      }

      // Add event listener for dark mode toggle with enhanced analytics
      $('#dark-mode-toggle').on('change', function() {
        const isDarkMode = $(this).is(':checked');
        
        // Toggle dark mode class on body
        $('body').toggleClass('dark-mode', isDarkMode);
        
        // Reapply current theme with dark mode setting
        applyTheme(current);
        
        // Send Google Analytics event for dark mode toggle with theme context
        if (typeof gtag === 'function') {
          gtag('event', 'dark_mode_toggle', {
            'event_category': 'Theme Settings',
            'event_label': themes[current].name + (isDarkMode ? ' - Enabled' : ' - Disabled'),
            'value': isDarkMode ? 1 : 0,
            'theme_name': themes[current].name
          });
        }
      });

    } catch (e) {
      console.error('Initialization failed:', e);
    }
  });
  </script>
</body>
</html>
